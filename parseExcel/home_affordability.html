
<html>
<head>
	<style type='text/css'>
			html { 



		  background: url(http://dev-open-housing-asheville.pantheon.io/wp-content/uploads/2015/05/Asheville_Downtown_panorama1.jpg) no-repeat center center fixed; 
		  -webkit-background-size: cover;
		  -moz-background-size: cover;
		  -o-background-size: cover;
		  background-size: cover;
		}

		body{
			text-align: center;
		}



		h1, p, div, span, b{
			font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
		    font-weight: 300;
		}

		b{
			font-weight: bold;
		}

		h1{
			margin-top: 20px;
			font-size: 3.2em;
			background: rgba(0,0,0,0.8);
			padding: 40px;
			color: white;
			display: inline-block;

		}
		#container{
			width: 90%;
/*			height: 75%;
*/			margin: 0px auto;
			background: rgba(255,255,255,0.8);
		}

		#header{
			text-align: left;
		}

		div{
			box-sizing: border-box;
		}

		.green-bar{
			border: 2px solid #333;
			border-top: none;
			position: relative;
		}

		.green-bar span{
			position: absolute;
			top: 45%;
			height: 10%;
			width: 100%;
			display: block;
		}

		.left-header{
			position: relative;
			border-bottom: 2px solid black; 
			width: 10%; display: inline-block; float: left;
		}

		.left-header div{
			position: absolute;
			top: 25%;
			height: 50%;
			width: 100%;
		}
	</style>
</head>
<body>
<div class='outer-container'>
	<h1>Tight Squeeze: Incomes vs Home Prices in Asheville</h1>
	<div id='container'>

	</div>
</div>
<script type='text/javascript' src='http://code.jquery.com/jquery-1.11.3.min.js'></script>


<script type='text/javascript' src='home_affordability.js'></script>
<script type='text/javascript'>
	function processRowText(input){
		if(input > 1000){
			input = (input / 1000).toFixed(0) + "K";
		}
		return input;
	}

	// Header Row
	html = "";
	html += "<div><h2 style='padding-top: 10px'>Home Prices (X)</h2></div><div id='header'><div style='width: 10%; display: inline-block; font-weight: bold; font-size: 0.8em; padding-left: 3px; text-align: center;'><h2>Household Income(Y)</h2></div><div style='width: 90%; display: inline-block;'>";
	for(index in home_for_sale_stats){
		row = home_for_sale_stats[index];
		width = parseFloat(row[3] * 100);

		html += "<div style='overflow: hidden; text-align: center; box-sizing: border-box; padding: 5px; border-left: 2px solid black; display: inline-block; width: " + width + "%;'>$" + processRowText(row[0]) + " - " + processRowText(row[1]) + "<br /><b>("+parseFloat(row[3]*100).toFixed(0)+"%)</b></div>";
	}
	html += "</div></div>";

	for(index in total_household_income_stats.reverse() ){
		row = total_household_income_stats[index];
		height = parseFloat(row[3]);
		height *= 70; // scaled down to fit on screen better

		width = parseFloat(row[4]);

		html += "<div><div class='left-header' style='height: " + height + "%;'><div>$" + processRowText(row[1]) + " - " + processRowText(row[0]) + " / yr <br /><b>(" + parseFloat(row[3] * 100).toFixed(0) + "%)</b></div></div>";

		html += "<div style='width: 90%; height: " + height + "%; background: #e96656; display: inline-block;'><a href='#' title='For households earning between " + processRowText(row[0]) + " and " + processRowText(row[1]) + ", " + parseFloat(width).toFixed(0) + "% of homes are affordable.'>";
			html += "<div class='green-bar' style='width: " + width + "%; background: #069059; height: 100%; color: white;'><span>" + width + "% of homes affordable</span></div>";
		html += "</div></a></div>";

	}

	if(html){
		$("#container").append(html);
	}

</script>
</body>
</html>